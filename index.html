<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="/assets/css/style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Djamal Eddine Ouikene - CV</title>
</head>
<body>
    <div id="cv-content" class="loading">Loading...</div>

    <script>
        async function loadCV() {
            try {
                const response = await fetch('/data/cv-data.json');
                const data = await response.json();
                renderCV(data);
            } catch (error) {
                console.error('Error loading CV data:', error);
                document.getElementById('cv-content').innerHTML = 'Error loading CV data';
            }
        }

        function renderCV(data) {
            const content = document.getElementById('cv-content');
            
            content.innerHTML = `
                <h1>${data.personalInfo.name}</h1>
                <div class="contact">
                    <p>${data.personalInfo.title}</p>
                    <p>${data.personalInfo.location} | ${data.personalInfo.phone} | 
                       <a href="mailto:${data.personalInfo.email}">${data.personalInfo.email}</a> | 
                       <a href="${data.personalInfo.url}" target="_blank">${data.personalInfo.url}</a></p>
                </div>

                <section>
                    <h2>Professional Summary</h2>
                    <p>${data.professionalSummary}</p>
                </section>

                <section>
                    <h2>Professional Experience</h2>
                    ${renderExperience(data.experience)}
                </section>

                <section>
                    <h2>Education & Certifications</h2>
                    <ul>
                        ${data.education.map(edu => `
                            <li><strong>${edu.degree}</strong> â€“ ${edu.institution} (${edu.year})</li>
                        `).join('')}
                        <li>${data.certifications.join(', ')}</li>
                    </ul>
                </section>

                <section>
                    <h2>Technical Skills</h2>
                    <ul>
                        ${Object.entries(data.skills).map(([category, skills]) => `
                            <li><strong>${formatCategory(category)}:</strong> ${skills.join(', ')}</li>
                        `).join('')}
                    </ul>
                </section>

                <section>
                    <h2>Languages</h2>
                    <p>${data.languages.map(l => `${l.language} (${l.level})`).join(', ')}</p>
                </section>

                <section>
                    <h2>Personal Interests</h2>
                    <ul>
                        ${data.interests.map(interest => `<li>${interest}</li>`).join('')}
                    </ul>
                </section>
            `;
        }

        function renderExperience(experience) {
            return experience.map(company => `
                <h3>${company.company} (${company.location})</h3>
                ${company.roles.map(role => `
                    <p><strong>${role.title}</strong> (${role.period})</p>
                    <ul>
                        ${role.responsibilities.map(resp => `<li>${resp}</li>`).join('')}
                    </ul>
                `).join('')}
            `).join('');
        }

        function formatCategory(category) {
            return category
                .replace(/([A-Z])/g, ' $1')
                .replace(/^./, str => str.toUpperCase())
                .trim();
        }

        // Load the CV when the page loads
        window.addEventListener('load', loadCV);
    </script>
</body>
</html>
